Corrected Code for Google Colab (No Errors)

This version uses XOR-based hiding (your method) and supports upload/download.

üìå STEP 1 ‚Äî Upload Image in Colab

Run this cell:

from google.colab import files
uploaded = files.upload()


Upload any image (e.g., img.jpg)

üìå STEP 2 ‚Äî Steganography Code (Corrected)
import cv2
import numpy as np
import os

# Dictionary for encoding characters
d = {chr(i): i for i in range(256)}
c = {i: chr(i) for i in range(256)}

# Read uploaded image
img_name = list(uploaded.keys())[0]
x = cv2.imread(img_name)

i, j, k = x.shape
print("Image Size:", i, "x", j)

# ----------- ENCRYPT / HIDE DATA -----------
key = input("Enter key to hide data: ")
text = input("Enter text to hide: ")

kl = 0      # key index
z = 0       # channel index
n = 0       # row
m = 0       # column

l = len(text)

for ch in text:
    x[n, m, z] = d[ch] ^ d[key[kl]]
    
    n += 1
    m += 1
    m = (m + 1) % 3
    kl = (kl + 1) % len(key)

cv2.imwrite("encrypted_img.png", x)
print("Encrypted image saved as encrypted_img.png")

from google.colab import files
files.download("encrypted_img.png")

# ----------- DECRYPT / EXTRACT DATA ------------
choice = int(input("\nEnter 1 to extract data: "))

if choice == 1:
    key1 = input("Re-enter key to extract: ")
    
    if key != key1:
        print("Keys do not match ‚ùå")
    else:
        decrypt = ""
        kl = 0
        n = 0
        m = 0
        z = 0
        
        for i in range(l):
            decrypt += c[x[n, m, z] ^ d[key[kl]]]
            
            n += 1
            m += 1
            m = (m + 1) % 3
            kl = (kl + 1) % len(key)
        
        print("\nExtracted Text:", decrypt)
else:
    print("Exiting...")

‚úÖ How to Use in Google Colab
1. Upload the image

Run the upload cell

Upload img.jpg (or any image)

2. Enter key & text

Example:

Enter key to hide data: abc
Enter text to hide: HelloWorld

3. Download encrypted image

Colab will automatically download:

encrypted_img.png

4. Enter 1 to extract data

When asked:

Enter 1 to extract data: 1
Re-enter key: abc


Correct key ‚Üí You get hidden text
Wrong key ‚Üí ‚ÄúKeys do not match ‚ùå‚Äù